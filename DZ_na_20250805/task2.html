<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ДЗ на 20250805_002.</title>
</head>
<body>
    
<script>
alert("Задача 2.");

// Задача 2.
// 2) Создайте новый массив, где каждый пользователь будет иметь свойство id (порядковый номер)
// Найдите самого старшего пользователя
// Посчитайте средний возраст пользователей

const nameUser = [
  { id: 1, name: "Jon", age: 68 },
  { id: 2, name: "Alice", age: 15 },
  { id: 3, name: "Ann", age: 30 }
]

// Выводим на экран содержимое массива "nameUser".
alert("Задан массив: ")
for ( i = 0; i < nameUser.length; i++ ) {
  alert(nameUser[i].id + "." + " " + nameUser[i].name + " - " + nameUser[i].age + " лет.");
}

// Создаем новый массив, который будем сортировать и выбирать самого старшего.
let oldestUser = [];
// Копируем в новый массив "oldestUser" все данные из массива "nameUser".
oldestUser = nameUser;

// Строки ниже можно расскомментировать, чтобы посмотреть содержимое нового массива "oldestUser".
// alert("Создан новый массив, на основе старого: ")
// for ( i = 0; i < oldestUser.length; i++ ) {
//   alert(oldestUser[i].id + "." + " " + oldestUser[i].name + " - " + oldestUser[i].age + " лет.");
// }

// Для сортировки массива используем метод .sort().
// Метод sort() на месте сортирует элементы массива и возвращает отсортированный массив.
// Синтаксис метода .sort() - arr.sort([compareFunction])
// Параметр "compareFunction"  указывать необязательно. Этот параметр задает функцию, определяющую порядок сортировки. 
// Если параметр "compareFunction" не задан, массив сортируется в соответствии со значениями кодовых точек каждого символа Unicode, 
// полученных путём преобразования каждого элемента в строку.
// При использовании метода .sort() копия массива не создаётся - массив сортируется на месте, внутри уже существующего массива, 
// который указан для сортировки.
// Метод имеет только один опциональный параметр — функцию-компаратор sort(compareFn).
// В функцию-компаратор передаются два аргумента a и b. Результат сравнения возвращаемого значения из функции с 0 определяет порядок элементов:
// - значение меньше 0 означает, что элемент a меньше, чем элемент b;
// - значение больше 0 означает, что элемент a больше, чем элемент b;
// - значение равно 0 означает, что элементы равны.
// Все элементы массива со значением undefined после сортировки попадут в конец массива. Для этих элементов не будет вызываться функция compareFn().
oldestUser.sort((a, b) => a.age - b.age);


// Строки ниже можно расскомментировать, чтобы посмотреть отсортированное состояние массива "oldestUser".
// alert("Новый массив после сортировки: ")
// for ( i = 0; i < oldestUser.length; i++ ) {
//   alert(oldestUser[i].id + "." + " " + oldestUser[i].name + " - " + oldestUser[i].age + " лет.");
// }


alert("Самый старший пользователь - " + oldestUser[oldestUser.length - 1].id + ". " + oldestUser[oldestUser.length - 1].name + " - ему " + oldestUser[oldestUser.length - 1].age + " лет.");

// Задаем переменную, в которую дальше запишем сумму возрастов всех пользователей, указанных в изначальном массиве "nameUser".
let sumAge = 0;

// Запускаем цикл for, в котором -
// - "i" - это будет номер индекса, по которому будем искать значения в массиве "nameUser", отсчет начинается с 0,
// - "i < nameUser.length;" - указываем, что условие, при котором цикл должен выполняться, это пока "i" меньше длины массива,
// - "i++" - шаг цикла - если условие цикла еще выполняется, увеличиваем "i" на 1.
for ( i = 0; i < nameUser.length; i++ ) {
  // Здесь -
  // - "+=" - прибавляем значение к предыдущему, которое было сохранено в переменной "sumAge" и это новое значение
  // станет новым содержимым переменной "sumAge",
  // - "nameUser[i].age" - это значит, что в массиве "nameUser" внутри объекта с индексом, номер которого приняла переменная "i"
  // при данном прохождении цикла, будет найдено и использовано значение элемента "age".
  sumAge += nameUser[i].age;
  // Это можно раскомментировать, чтобы убедиться, что подсчет выполняется.
  // alert(sumAge);
}

// Определяем переменную, в которой дальше сохраним среднее значение всех возрастов пользователей.
var middleAge = 0;

// Высчитываем среднее значение всех возрастов пользователей.
// Для этого -
// - Используем метод Math.round(), который возвращает число, округлённое к ближайшему целому.
// Если дробная часть числа больше, либо равна 0,5, аргумент будет округлён до ближайшего большего целого. 
// Если дробная часть числа меньше 0,5, аргумент будет округлён до ближайшего меньшего целого.
// - Делим "sumAge" на количество всех пользователей, указанных в массиве "nameUser", оно равно длине массива, то есть - "nameUser.length".
middleAge = Math.round(sumAge/nameUser.length);

// Выводим на экран средний возраст пользователей.
alert("Средний возраст пользователей - " + middleAge + " лет.");

</script>

</body>
</html>